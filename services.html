<!DOCTYPE html>
<html lang="hi">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Mithila College Help - Secure Login & Order</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
    <style>
        :root { --tiranga-orange: #FF9933; --tiranga-green: #138808; }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Poppins', sans-serif; background: linear-gradient(120deg, var(--tiranga-orange), #ffffff, var(--tiranga-green)); background-size: 300% 300%; animation: gradientShift 10s ease infinite; min-height: 100vh; }
        @keyframes gradientShift { 0% { background-position: 0% 50%; } 50% { background-position: 100% 50%; } 100% { background-position: 0% 50%; } }
        
        main { max-width: 600px; margin: 50px auto; background: rgba(255,255,255,0.95); padding: 30px; border-radius: 15px; box-shadow: 0 8px 30px rgba(0,0,0,0.2); }
        h2 { color: var(--tiranga-green); border-left: 5px solid var(--tiranga-orange); padding-left: 10px; margin-bottom: 20px; text-align: center; }
        
        .form-group { margin-bottom: 15px; }
        input, select { width: 100%; padding: 12px; border-radius: 8px; border: 1px solid #ccc; outline: none; font-size: 15px; }
        
        .captcha-box { background: #eee; padding: 10px; border-radius: 8px; text-align: center; font-weight: bold; font-size: 18px; margin-bottom: 10px; letter-spacing: 5px; color: #333; }
        
        .btn { border: none; color: white; font-weight: 700; padding: 15px; border-radius: 30px; cursor: pointer; width: 100%; font-size: 16px; transition: 0.3s; margin-top: 10px; }
        .btn-login { background: #007BFF; }
        .btn-order { background: linear-gradient(to right, var(--tiranga-orange), var(--tiranga-green)); }
        
        #order-section, #qr-container, #receipt_card { display: none; }
        .price-box { background: #fff3cd; color: #856404; padding: 10px; border-radius: 8px; text-align: center; font-weight: bold; margin-bottom: 15px; }
    </style>
</head>
<body>

    <main id="auth-box">
        <h2>üîê ‡§∏‡•Å‡§∞‡§ï‡•ç‡§∑‡§ø‡§§ ‡§≤‡•â‡§ó‡§ø‡§® (Login)</h2>
        <div class="form-group">
            <input type="text" id="login_phone" placeholder="‡§Æ‡•ã‡§¨‡§æ‡§á‡§≤ ‡§®‡§Ç‡§¨‡§∞">
        </div>
        <div class="form-group">
            <input type="password" id="login_pass" placeholder="‡§™‡§æ‡§∏‡§µ‡§∞‡•ç‡§°">
        </div>
        
        <div class="captcha-box" id="captcha_display"></div>
        <div class="form-group">
            <input type="text" id="captcha_input" placeholder="‡§ä‡§™‡§∞ ‡§¶‡§ø‡§Ø‡§æ ‡§ó‡§Ø‡§æ ‡§ï‡•à‡§™‡•ç‡§ö‡§æ ‡§≠‡§∞‡•á‡§Ç">
        </div>
        
        <button class="btn btn-login" onclick="checkLogin()">‡§≤‡•â‡§ó‡§ø‡§® ‡§ï‡§∞‡•á‡§Ç</button>
        <p id="login_err" style="color:red; font-size:12px; margin-top:10px; text-align:center;"></p>
    </main>

    <main id="order-section">
        <h2>üõí ‡§Ö‡§™‡§®‡§æ ‡§ë‡§∞‡•ç‡§°‡§∞ ‡§ö‡•Å‡§®‡•á‡§Ç</h2>
        <div class="form-group">
            <select id="order_item" onchange="updateCalc()">
                <option value="">-- ‡§™‡•à‡§ï‡•á‡§ü ‡§ö‡•Å‡§®‡•á‡§Ç --</option>
                <option value="Packet A" data-rate="9300">Packet A (‚Çπ9300/kg)</option>
                <option value="Packet B" data-rate="11700">Packet B (‚Çπ11700/kg)</option>
                <option value="Packet C" data-rate="5500">Packet C (‚Çπ5500/kg)</option>
            </select>
        </div>
        <div class="form-group">
            <input id="order_grams" type="number" placeholder="‡§ó‡•ç‡§∞‡§æ‡§Æ (Min 100)" min="100" oninput="updateCalc()">
        </div>
        <div id="price_display" class="price-box">‡§ï‡•Å‡§≤ ‡§ï‡•Ä‡§Æ‡§§: ‚Çπ0.00</div>
        <div class="form-group">
            <input id="order_addr" placeholder="‡§™‡•Ç‡§∞‡§æ ‡§°‡§ø‡§≤‡•Ä‡§µ‡§∞‡•Ä ‡§™‡§§‡§æ">
        </div>
        
        <button class="btn btn-order" onclick="generateOrder()">üí≥ ‡§™‡•á‡§Æ‡•á‡§Ç‡§ü ‡§î‡§∞ ‡§ë‡§∞‡•ç‡§°‡§∞ ‡§ú‡•á‡§®‡§∞‡•á‡§ü ‡§ï‡§∞‡•á‡§Ç</button>

        <div id="qr-container" style="text-align:center;">
            <div id="qrcode" style="margin:20px 0;"></div>
            <button class="btn" onclick="showReceipt()" style="background:#28a745;">‡§Æ‡•à‡§Ç‡§®‡•á ‡§™‡•á‡§Æ‡•á‡§Ç‡§ü ‡§ï‡§∞ ‡§¶‡§ø‡§Ø‡§æ (‡§∞‡§∏‡•Ä‡§¶)</button>
        </div>

        <div id="receipt_card" style="border:1px solid #ddd; padding:15px; margin-top:20px; border-radius:10px; background:#fff;">
            <h3 style="text-align:center; color:var(--tiranga-green);">‡§ë‡§∞‡•ç‡§°‡§∞ ‡§∞‡§∏‡•Ä‡§¶</h3>
            <p id="r_data" style="font-size:14px; margin:10px 0;"></p>
            <button class="btn" onclick="sendToAdmin()" style="background:#25D366;">WhatsApp ‡§™‡§∞ ‡§µ‡§ø‡§µ‡§∞‡§£ ‡§≠‡•á‡§ú‡•á‡§Ç</button>
        </div>
    </main>

    <script>
        let captchaVal = "";
        let totalVal = 0;
        let adminPhone = "916200732472";

        // 1. ‡§ï‡•à‡§™‡•ç‡§ö‡§æ ‡§ú‡•á‡§®‡§∞‡•á‡§ü ‡§ï‡§∞‡•á‡§Ç
        function genCaptcha() {
            let num1 = Math.floor(Math.random() * 10);
            let num2 = Math.floor(Math.random() * 10);
            captchaVal = num1 + num2;
            document.getElementById('captcha_display').innerText = `${num1} + ${num2} = ?`;
        }
        window.onload = genCaptcha;

        // 2. ‡§≤‡•â‡§ó‡§ø‡§® ‡§ö‡•á‡§ï ‡§ï‡§∞‡•á‡§Ç
        function checkLogin() {
            const phone = document.getElementById('login_phone').value;
            const pass = document.getElementById('login_pass').value;
            const capInput = document.getElementById('captcha_input').value;

            // ‡§°‡•á‡§Æ‡•ã ‡§ï‡•á ‡§≤‡§ø‡§è ‡§™‡§æ‡§∏‡§µ‡§∞‡•ç‡§° 'mithila123' ‡§∞‡§ñ‡§æ ‡§π‡•à, ‡§Ü‡§™ ‡§á‡§∏‡•á ‡§¨‡§¶‡§≤ ‡§∏‡§ï‡§§‡•á ‡§π‡•à‡§Ç
            if (phone.length === 10 && pass === "mithila123" && capInput == captchaVal) {
                document.getElementById('auth-box').style.display = 'none';
                document.getElementById('order-section').style.display = 'block';
            } else {
                document.getElementById('login_err').innerText = "‚ùå ‡§ó‡§≤‡§§ ‡§®‡§Ç‡§¨‡§∞, ‡§™‡§æ‡§∏‡§µ‡§∞‡•ç‡§° ‡§Ø‡§æ ‡§ï‡•à‡§™‡•ç‡§ö‡§æ!";
                genCaptcha();
            }
        }

        // 3. ‡§ë‡§∞‡•ç‡§°‡§∞ ‡§ï‡•à‡§≤‡§ï‡•Å‡§≤‡•á‡§∂‡§®
        function updateCalc() {
            const sel = document.getElementById('order_item');
            const g = document.getElementById('order_grams').value;
            const rate = sel.options[sel.selectedIndex].getAttribute('data-rate');
            if(rate && g >= 100) {
                totalVal = (rate / 1000) * g;
                document.getElementById('price_display').innerText = `‡§ï‡•Å‡§≤ ‡§ï‡•Ä‡§Æ‡§§: ‚Çπ${totalVal.toFixed(2)}`;
            }
        }

        // 4. ‡§™‡•á‡§Æ‡•á‡§Ç‡§ü ‡§ï‡•ç‡§Ø‡•Ç‡§Ü‡§∞
        function generateOrder() {
            const addr = document.getElementById('order_addr').value;
            if(!addr || totalVal === 0) return alert("‡§ú‡§æ‡§®‡§ï‡§æ‡§∞‡•Ä ‡§≠‡§∞‡•á‡§Ç!");
            
            document.getElementById('qr-container').style.display = 'block';
            const upi = `upi://pay?pa=7033578145@sbi&pn=MithilaHelp&am=${totalVal.toFixed(2)}&cu=INR`;
            
            const qrBox = document.getElementById('qrcode');
            qrBox.innerHTML = "";
            new QRCode(qrBox, { text: upi, width: 180, height: 180 });
        }

        function showReceipt() {
            document.getElementById('receipt_card').style.display = 'block';
            const name = document.getElementById('login_phone').value;
            const item = document.getElementById('order_item').value;
            const grams = document.getElementById('order_grams').value;
            const addr = document.getElementById('order_addr').value;
            
            document.getElementById('r_data').innerHTML = `
                <b>‡§ë‡§∞‡•ç‡§°‡§∞ ‡§Ü‡§à‡§°‡•Ä:</b> #MCH${Date.now().toString().slice(-4)}<br>
                <b>‡§∏‡§æ‡§Æ‡§æ‡§®:</b> ${item} (${grams}g)<br>
                <b>‡§ï‡•Å‡§≤ ‡§∞‡§æ‡§∂‡§ø:</b> ‚Çπ${totalVal.toFixed(2)}<br>
                <b>‡§™‡§§‡§æ:</b> ${addr}
            `;
        }

        function sendToAdmin() {
            const text = `*New Order Confirmed*%0AID: #MCH${Date.now().toString().slice(-4)}%0AItem: ${document.getElementById('order_item').value}%0AAmount: Rs.${totalVal.toFixed(2)}%0AAddress: ${document.getElementById('order_addr').value}`;
            window.open(`https://wa.me/${adminPhone}?text=${text}`, '_blank');
        }
    </script>
</body>
</html>
